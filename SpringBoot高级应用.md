# 一、SpringBoot与缓存

**JSR-107，Spring缓存抽象、整合Redis**

### 一、缓存应用场景

缓存是每一个系统都应该考虑的一个功能，用来加速我们系统的访问，提升系统的性能。

- 比如有一些需要经常访问的高频热点数据。例如某一个电商网站的商品信息。这些商品信息存在数据库中，每一次访问商品信息都要访问数据库的话，这样的操作，耗时代价太大。我们可以引入一个缓存中间件，把这些商品信息放到缓存中。这样不需要直接查询数据库了，先查询缓存，如果说，缓存中有就直接用，缓存中没有来考虑查询数据库，数据库查到了，把数据可以再放到缓存中，方便后来继续使用。有了缓存以后我们就能提升系统性能，因为我们的应用程序和缓存的交互是非常快的。
- 比如一些临时性的数据，给某个用户手机号发送验证码，验证码三分钟有效，用完就删除。如果这些临时性的数据也放在数据库中，那我们数据库的负担有点大，性能也是很低的，我们也可以把这些临时性的数据放在缓存中，我们系统可以去存取这些临时性数据。

### 二、JSR107

由于JSR107难度比较大，Spring缓存抽象和JSR107底层是类似的用它。

Java Caching定义了5个核心接口，分别是**CachingProvider,CacheManager,Cache,Entry和Expiry**

- **CachingProvider**：定义了创建、配置、获取、管理和控制多个CacheManger。一个应用可以在运行期访问多个CachingManager
- **CacheManager**：定义了创建、配置、获取、管理和控制多个唯一命名的Cache，这些Cache存在CacheManager的上下文中。一个CacheManager仅被一个CachingProvider所拥有。
- **Cache**：是一个类似Map的数据结构并临时存储以Key为索引的值，一个Cache仅被一个CacheManager所拥有
- **Entry**：是一个存储在Cache中的Key-Value对
- **Expiry**：每一个存储在Cache中的条目有一个定义的有效期，一旦超过这个时间，条目为过期状态。一旦过期，条目将不可访问、更新和删除。缓存有效期可以通过ExpiryPolicy设置。

![](/home/victor/桌面/缓存组件架构.png)

